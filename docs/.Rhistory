print("hello")
setwd("~/Documents/GitHub/film_networks/docs")
knitr::opts_chunk$set(echo = TRUE)
#theme: united
#highlight: tango
library(tidyverse)
library(quanteda) #for text cleaning
library(igraph) #for creating graphs
library(visNetwork) #for visualizing graphs
library(gridExtra)
library(gtable)
library(wordcloud)
source("calculatecoocstats.R") #calculate co-occurrence statistics
source("grapher.R") #create graph
source("graphervf.R") #grapher 2
source("grapherdemo.R") #other grapher
source("token_filter.R") #filter tokens
load("token.all.RData")
library(rvest)
head(token.all, 5)
#convert tokens to all lower
token.all <- tokens_tolower(token.all) #convert all tokens to lower
token.all = token.all %>% tokens_remove(c('ex/adj', 'ex/noun'))
load('n_movies.Rdata')
head(n_movies)
n_movies
ggplot(n_movies, aes(x = year, y = n)) +
geom_bar(stat = 'identity', width = 0.5, color = 'black',
position = position_dodge(width = 0.4)) +
theme_linedraw() + ylab('no. of plots')
ggplot(n_movies, aes(x = year, y = n)) +
geom_bar(stat = 'identity', width = 0.5, color = 'black') +
theme_linedraw() + ylab('no. of plots')
ggplot(n_movies, aes(x = year, y = n)) +
geom_bar(stat = 'identity', width = 2, color = 'black') +
theme_linedraw() + ylab('no. of plots')
ggplot(n_movies, aes(x = year, y = n)) +
geom_bar(stat = 'identity', width = 3, color = 'black') +
theme_linedraw() + ylab('no. of plots')
ggplot(n_movies, aes(x = year, y = n)) +
geom_bar(stat = 'identity', width = 4, color = 'black') +
theme_linedraw() + ylab('no. of plots')
ggplot(n_movies, aes(x = as.factor(year), y = n)) +
geom_bar(stat = 'identity', width = 4, color = 'black') +
theme_linedraw() + ylab('no. of plots')
ggplot(n_movies, aes(x = as.factor(year), y = n)) +
geom_bar(stat = 'identity', width = 0.5, color = 'black') +
theme_linedraw() + ylab('no. of plots')
ggplot(n_movies, aes(x = as.factor(year), y = n)) +
geom_bar(stat = 'identity', width = 0.5, color = 'black',
position = position_dodge(width = 0.4)) +
theme_linedraw() + ylab('no. of plots')
ggplot(n_movies, aes(x = as.factor(year), y = n)) +
geom_bar(stat = 'identity', width = 0.5, color = 'black',
position = position_dodge(width = 0.4)) +
theme_linedraw() + ylab('no. of plots') + xlab('decade')
#average number of sentences per plot across decades
sents_df = data.frame(decade = as.character(),
n_sents = as.numeric())
for(i in seq(1940, 2010, 10)){
n_sents = ndoc(tokens_subset(token.all, decade == i))
sents_t = data.frame(decade = as.character(i),
n_sents = as.numeric(n_sents))
sents_df = rbind(sents_df, sents_t)
}
n_movies$sents_per_plot <- sents_df$n_sents/n_movies$n
n_movies
ggplot(n_movies, aes(x = as.factor(year), y = sents_per_plot)) +
geom_bar(stat = 'identity', width = 0.5, color = 'black',
position = position_dodge(width = 0.4)) +
theme_linedraw() + ylab('no. of plots') + xlab('decade')
ggplot(n_movies, aes(x = as.factor(year), y = n)) +
geom_bar(stat = 'identity', width = 0.5, color = 'black',
position = position_dodge(width = 0.4)) +
theme_linedraw() + ylab('plots') + xlab('decade')
